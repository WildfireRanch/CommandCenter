# ═══════════════════════════════════════════════════════════════════════════
# CommandCenter Environment Variables
# ═══════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# Core Configuration
# ─────────────────────────────────────────────────────────────────────────────

ENV=development
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# ─────────────────────────────────────────────────────────────────────────────
# OpenAI Configuration
# ─────────────────────────────────────────────────────────────────────────────

OPENAI_API_KEY=your-openai-api-key-here

# ─────────────────────────────────────────────────────────────────────────────
# Database Configuration (Railway auto-provides)
# ─────────────────────────────────────────────────────────────────────────────

DATABASE_URL=${{Postgres.DATABASE_URL}}

# ─────────────────────────────────────────────────────────────────────────────
# SolArk Integration
# ─────────────────────────────────────────────────────────────────────────────

SOLARK_EMAIL=your-email@example.com
SOLARK_PASSWORD=your-solark-password
SOLARK_PLANT_ID=146453

# ─────────────────────────────────────────────────────────────────────────────
# Knowledge Base Configuration
# ─────────────────────────────────────────────────────────────────────────────

INDEX_ROOT=./data/index

# ─────────────────────────────────────────────────────────────────────────────
# V1.8: Redis Configuration (for Smart Context Caching)
# ─────────────────────────────────────────────────────────────────────────────

# Redis connection URL (Railway auto-provides)
REDIS_URL=${{Redis.REDIS_URL}}

# Redis connection settings
REDIS_MAX_RETRIES=3
REDIS_TIMEOUT=5
REDIS_SSL=false

# ─────────────────────────────────────────────────────────────────────────────
# V1.8: Smart Context Loading Configuration
# ─────────────────────────────────────────────────────────────────────────────

# Enable/disable context caching
CONTEXT_CACHE_ENABLED=true

# Cache TTL (time-to-live) in seconds (default: 300 = 5 minutes)
CONTEXT_CACHE_TTL=300

# Token budgets per query type
CONTEXT_SYSTEM_TOKENS=2000      # System status queries
CONTEXT_RESEARCH_TOKENS=4000    # Research/documentation queries
CONTEXT_PLANNING_TOKENS=3500    # Planning/optimization queries
CONTEXT_GENERAL_TOKENS=1000     # Greetings/simple queries

# KB search settings
KB_MIN_SIMILARITY=0.3           # Minimum relevance score (0-1)
KB_MAX_DOCS_SYSTEM=1            # Max KB docs for system queries
KB_MAX_DOCS_RESEARCH=5          # Max KB docs for research queries
KB_MAX_DOCS_PLANNING=3          # Max KB docs for planning queries
KB_MAX_DOCS_GENERAL=0           # Max KB docs for general queries

# KB token limits
KB_MAX_TOKENS_SYSTEM=500        # Max tokens for KB in system queries
KB_MAX_TOKENS_RESEARCH=2000     # Max tokens for KB in research queries
KB_MAX_TOKENS_PLANNING=1000     # Max tokens for KB in planning queries
KB_MAX_TOKENS_GENERAL=0         # Max tokens for KB in general queries

# Conversation history
MAX_CONVERSATION_MESSAGES=5     # Max conversation messages to include
MAX_CONVERSATION_TOKENS=1000    # Max tokens for conversation history

# Token estimation
CHARS_PER_TOKEN=4.0             # Approximate characters per token

# System context
ALWAYS_INCLUDE_SYSTEM_CONTEXT=true
SYSTEM_CONTEXT_RESERVED_TOKENS=1000

# Fallback behavior
FALLBACK_ON_CACHE_MISS=true
FALLBACK_ON_ERROR=true
TRUNCATE_ON_BUDGET_EXCEEDED=true
